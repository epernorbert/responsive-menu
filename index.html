<html>
<head>
	<meta charset="utf-8">
	<title>Navbar</title>
	<link rel="stylesheet" href="navbar.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>		
</head>
<body>
	<header>
		<nav class="box">
			<div class="logo">
				<img src="https://via.placeholder.com/200x70">
			</div>
			<div class="push"></div>
			<div id="menu_item" class="menu_item">
				<div id="menu-1">Menu-1</div>
				<div id="menu-2">Menu-2</div>
				<div id="menu-3">Menu-3</div>
				<div id="menu-4">Menu-4</div>								
			</div>
			<div id="hamburger" class="hamburger">
				<span></span>
				<span></span>
				<span></span>
				<span></span>
			</div>
		</nav>	
	</header>

	<div class="content-main">
		<div class="content_box">			
			<div class="content1" id="menu-1-scroll">Conten 1</div>
			<div class="content2" id="menu-2-scroll">Conten 2</div>
			<div class="content3" id="menu-3-scroll">Conten 3</div>
			<div class="content4" id="menu-4-scroll">Conten 4</div>
		</div>
	</div>
	<script>		
		$(document).ready(function(){
			$('#hamburger').click(function(){	

				const hamburgerDiv = document.querySelector('.hamburger');	
							
				if(hamburgerDiv.classList.contains('open')){															
					$( ".menu_item" ).addClass("up");			
					$( ".menu_item" ).removeClass("down");				
				}else{					
					$("#menu_item").css("display", "flex");
					$("#menu_item").css("background", "red");
					$("#menu_item").css("position", "absolute");
					$("#menu_item").css("width", "100%");
					$("#menu_item").css("top", "100px");
					$("#menu_item").css("text-align", "center");
					$("#menu_item").css("flex-direction", "column");
					$("#menu_item").css("padding", "0");	
					$( ".menu_item" ).addClass("down");				 									 
					$( ".menu_item" ).removeClass("up");				
				}
				$(this).toggleClass('open');				
			});		
					
			rollUpHamburger();
		});

		

		/* Resize window */
		window.addEventListener('resize', function(event){
			var newWidth = window.innerWidth;			
			var menu_item_width = $("#menu_item").outerWidth();
			var box_width = $(".box").outerWidth();
			var logo_width = $(".logo").outerWidth();	
			
			$(".menu_item").css("position", "relative");																	
			$(".menu_item").css("top", "0");
			$(".menu_item").css("width", "auto");
			$(".menu_item").css("background", "none");
			$("#menu_item").css("padding", "0 40px 0 40px");
			$( ".menu_item" ).removeClass("up");
		
			if(box_width > (menu_item_width + logo_width)){				
				$("#hamburger").css("display", "none");
				$(".menu_item").css("display", "block");
				$( "#menu_item div" ).removeClass("toggle_menu");					
			}else{				
				$("#hamburger").css("display", "block");
				$(".menu_item").css("display", "none");
				$( "#menu_item div" ).addClass("toggle_menu");								
			}
			
			rollUpHamburger();
		});	

					
		
		/* First load */
		var menu_item_width = $("#menu_item").outerWidth();		
		var logo_width = $(".logo").outerWidth();
		var loadWidth = $(window).width();		

		if(loadWidth > (menu_item_width + logo_width)){
			$("#hamburger").css("display", "none");
			$(".menu_item").css("display", "block");	
			$( "#menu_item div" ).removeClass("toggle_menu");							
		}else{				
			$("#hamburger").css("display", "block");
			$(".menu_item").css("display", "none");																	
			$(".menu_item").css("position", "absolute");																	
			$(".menu_item").css("top", "100px");	
			$( "#menu_item div" ).addClass("toggle_menu");																
		}
		
		var refresh = setInterval(refreshLogoWidth, 100);
		var counter = 0;

		function refreshLogoWidth(){
			
			rollUpHamburger();
			counter = counter + 1;
			var menu_item_width = $("#menu_item").outerWidth();		
			var logo_width = $(".logo").outerWidth();
			var loadWidth = $(window).width();		
			console.log(0)
			if(loadWidth > (menu_item_width + logo_width)){
				$("#hamburger").css("display", "none");
				$(".menu_item").css("display", "block");	
				$( "#menu_item div" ).removeClass("toggle_menu");							
			}else{				
				$("#hamburger").css("display", "block");
				$(".menu_item").css("display", "none");																	
				$(".menu_item").css("position", "absolute");																	
				$(".menu_item").css("top", "100px");	
				$( "#menu_item div" ).addClass("toggle_menu");																
			}
			if(counter >= 3){
				stopRefresh()
			}
		}
		function stopRefresh() {
			clearInterval(refresh);
		}		
	

		
		/* Menu item scroll by click */
		$('#menu-1').on('click keypress', function(event){
			if(isItClick(event) === true){
				let program_pos = document.getElementById('menu-1-scroll').getBoundingClientRect();
				$('html, body').animate({ scrollTop: program_pos.top - 100 + window.pageYOffset }, "slow");				
			}
		});
		$('#menu-2').on('click keypress', function(event){
			if(isItClick(event) === true){
				let program_pos = document.getElementById('menu-2-scroll').getBoundingClientRect();
				$('html, body').animate({ scrollTop: program_pos.top - 100 + window.pageYOffset }, "slow");				
			}
		});
		$('#menu-3').on('click keypress', function(event){
			if(isItClick(event) === true){
				let program_pos = document.getElementById('menu-3-scroll').getBoundingClientRect();
				$('html, body').animate({ scrollTop: program_pos.top - 100 + window.pageYOffset }, "slow");				
			}
		});
		$('#menu-4').on('click keypress', function(event){
			if(isItClick(event) === true){
				let program_pos = document.getElementById('menu-4-scroll').getBoundingClientRect();
				$('html, body').animate({ scrollTop: program_pos.top - 100 + window.pageYOffset }, "slow");				
			}
		});
		function isItClick(event){
			if(event.type === 'click'){
				return true;
			} else if(event.type === 'keypress'){
				var code = event.charCode || event.keyCode;
				if((code === 32)|| (code === 13)){
					return true;
				}
			} else{
				return false;
			}
		}



		/* hamburger menü legördült állapotban menü elemre kattintva felgördül a menü */
		function rollUpHamburger(){
			$('.toggle_menu').click(function(){
				if($(".hamburger").hasClass("open")){
					$(".hamburger").removeClass("open")
				}
				if($("#menu_item").hasClass("down")){
					$(".menu_item").removeClass("down")
					$(".menu_item").addClass("up")
				} 
			});
		}
	</script>	
</body>
</html>